{
  "openapi": "3.0.1",
  "info": {
    "title": "Documents MS",
    "description": "Documents MS",
    "version": "1.0"
  },
  "servers": [
    {
      "url": "http://localhost:9001",
      "description": "Servidor local en puerto 9001"
    }
  ],
  "paths": {
    "/documents/public/app/version": {
      "get": {
        "tags": ["application-controller"],
        "operationId": "getVersion",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/documents/public/app/healthCheck": {
      "get": {
        "tags": ["application-controller"],
        "operationId": "healthCheck",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/documents/policies": {
      "get": {
        "tags": ["documents-controller"],
        "summary": "Obtener póliza",
        "description": "Retorna los metadatos de una póliza a partir de su número, endoso y parte.",
        "operationId": "getPolicy",
        "parameters": [
          {
            "name": "policyNumber",
            "in": "query",
            "description": "Número de póliza",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "example": 123456
          },
          {
            "name": "endorsement",
            "in": "query",
            "description": "Número de endoso",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "example": 1
          },
          {
            "name": "part",
            "in": "query",
            "description": "Número de parte de la póliza",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            },
            "example": 1
          }
        ],
        "responses": {
          "200": {
            "description": "Póliza encontrada",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentResponse"
                }
              }
            }
          }
        }
      }
    },
    "/documents/policies/content": {
      "get": {
        "tags": ["documents-controller"],
        "summary": "Obtener contenido de póliza",
        "description": "Retorna el contenido de una póliza en formato base64.",
        "operationId": "getPolicyContent",
        "parameters": [
          {
            "name": "policyNumber",
            "in": "query",
            "description": "Número de póliza",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "example": 123456
          },
          {
            "name": "endorsement",
            "in": "query",
            "description": "Número de endoso",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "example": 1
          },
          {
            "name": "part",
            "in": "query",
            "description": "Número de parte de la póliza",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            },
            "example": 1
          }
        ],
        "responses": {
          "200": {
            "description": "Contenido PDF en base64",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ContentResponse"
                }
              }
            }
          }
        }
      }
    },
    "/documents/certificates": {
      "get": {
        "tags": ["documents-controller"],
        "summary": "Obtener certificado",
        "description": "Retorna los metadatos de un certificado asociado a una póliza.",
        "operationId": "getCertificate",
        "parameters": [
          {
            "name": "policyNumber",
            "in": "query",
            "description": "Número de póliza",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "example": 123456
          },
          {
            "name": "endorsement",
            "in": "query",
            "description": "Número de endoso",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "example": 1
          },
          {
            "name": "item",
            "in": "query",
            "description": "Número de ítem asociado (opcional)",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "example": 5
          },
          {
            "name": "documentCode",
            "in": "query",
            "description": "Código de documento",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "example": 100
          }
        ],
        "responses": {
          "200": {
            "description": "Certificado encontrado",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentResponse"
                }
              }
            }
          }
        }
      }
    },
    "/documents/certificates/content": {
      "get": {
        "tags": ["documents-controller"],
        "summary": "Obtener contenido de certificado",
        "description": "Retorna el contenido de un certificado en formato base64.",
        "operationId": "getCertificateContent",
        "parameters": [
          {
            "name": "policyNumber",
            "in": "query",
            "description": "Número de póliza",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "example": 123456
          },
          {
            "name": "endorsement",
            "in": "query",
            "description": "Número de endoso",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "example": 1
          },
          {
            "name": "item",
            "in": "query",
            "description": "Número de ítem asociado (opcional)",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "example": 5
          },
          {
            "name": "documentCode",
            "in": "query",
            "description": "Código de documento",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            },
            "example": 100
          }
        ],
        "responses": {
          "200": {
            "description": "Contenido PDF en base64",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ContentResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "DocumentResponse": {
        "type": "object",
        "properties": {
          "documentUrl": {
            "type": "string",
            "description": "URL del documento a recuperar",
            "example": "https://server.com/documents/Poliza_123456.pdf"
          }
        },
        "description": "Respuesta con la URL del documento disponible para su descarga o visualización"
      },
      "ContentResponse": {
        "type": "object",
        "properties": {
          "fileName": {
            "type": "string",
            "description": "Nombre del archivo",
            "example": "Poliza_123456.pdf"
          },
          "contentType": {
            "type": "string",
            "description": "Tipo de contenido MIME",
            "example": "application/pdf"
          },
          "contentEncoding": {
            "type": "string",
            "description": "Codificación utilizada",
            "example": "base64"
          },
          "contentLength": {
            "type": "integer",
            "description": "Tamaño del archivo en bytes",
            "format": "int64",
            "example": 24576
          },
          "content": {
            "type": "string",
            "description": "Contenido del archivo codificado en base64",
            "example": "JVBERi0xLjQKJcfs..."
          }
        },
        "description": "Respuesta con contenido de un documento en base64 y metadatos asociados"
      }
    }
  }
}
